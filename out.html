<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="section" id="about">
<h1>About</h1>
<p>This project is a Python library which implements a generic concurrent tree-crawling algorithm. In practice, it can be used in tasks that require a couple of crawling threads to explore a tree-like structure e.g. when downloading documents from a hierarchical web site.</p>
<p>Although the main application domain for this library is using it to crawl a web site with known tree-like structure, one of its main design goals was flexibility in adjusting it to different application areas. The library was consciously developed to be useful in the following 3 cases. These cases are listed here from the least to the most general (and from the one requiring the least implementation effort from the user of the library to the one requiring the most of it).</p>
<div class="section" id="main-use-cases-of-the-library">
<h2>Main use-cases of the library</h2>
<ol class="arabic simple">
<li>Crawling HTML web site with known and fixed tree-like structure. In this approach, the number of tree levels is fixed and each page on a certain tree level has basically the same structure (i.e. it is parsed by the same parser). On each level, the links to the pages of the lower level are not necessarily placed on one page, but can be distributed among many pages. See a sample testing web site <tt class="docutils literal">concurrent_tree_crawler/test/data/original_site/issues_1.html</tt> for an example of such a site.</li>
<li>Crawling some other HTML web site with a tree-like structure.</li>
<li>Crawling some other tree-like structure.</li>
</ol>
</div>
</div>
<div class="section" id="library-features">
<h1>Library features</h1>
<ul class="simple">
<li>Generic features of the library:<ul>
<li><strong>Resistance to abnormal program termination</strong> (e.g. due to computer shutdown). The information about the part of the tree that has been already visited is saved in a file and restored at the next program start. This way e.g. the leaf nodes that have been already explored are not explored again.</li>
<li><strong>Consistent dealing with navigation problems</strong>. When a navigation problem occurs in a certain thread while exploring the tree (in case of a web site it might be e.g. a dead link or a malformed web page), the thread's browser is restarted and the node of the tree that caused the problem is marked as erroneous. For technical details, see the description of the <tt class="docutils literal">AbstractTreeNavigator</tt> class.</li>
<li><strong>Daily schedule of program activity</strong>. The user can enter a daily time interval during which the program will be actively crawling the tree; the program will sleep during the rest of the time.</li>
<li><strong>Logging program activity</strong>. The user can choose between 3 levels of details of logging messages. The logging messages are printed to the standard output but their copy can be also saved in a file.</li>
<li><strong>Handling same node name problem</strong>. Some children of the same parent might have the same name. In case of web crawling, this might happen when the name of the node is based on a name of a link pointing to a web page corresponding to this node, and the there are many links with the same name. This is not desirable, because we assume that every child of a certain parent has different name. This assumption simplifies e.g. web crawling task when for each node we create a directory or a file with the name which is the same as the node name (and of course there cannot be two files with the same name in a single directory). To solve this problem, whenever it seems that a certain tree node has two or more children of the same name, the consecutive children are renamed according to the pattern: <tt class="docutils literal"><span class="pre">NAME-repetition_1</span></tt>, <tt class="docutils literal"><span class="pre">NAME-repetition_2</span></tt> and so on.</li>
</ul>
</li>
<li>Web site crawler-related features:<ul>
<li><strong>Throttling the download speed</strong>. The user can set a maximal number of web pages to be visited by the crawler.</li>
<li><strong>Handling many linked web pages corresponding to a single tree node</strong>. A part of the library (class <tt class="docutils literal">HTMLMultipageNavigator</tt>) explicitly handles situation when there are many pages corresponding to a single tree node. See a sample testing web site <tt class="docutils literal">concurrent_tree_crawler/test/data/original_site/issues_1.html</tt> for an example of such a site.</li>
<li><strong>Handling the same web page -- different address problem</strong>. Some web sites might be constructed so that the same web page might have a different address when viewed through browsers belonging to two different threads. It might be the case e.g. when each thread has to log in on the web site as a different user and the user name is appended to the address of each web page. As long as the user or the library can give the same name to those pages (see <tt class="docutils literal">AbstractPageAnalyzer.get_links()</tt> function and <tt class="docutils literal">PageLinks</tt> class for technical details), they are regarded by the library as the same page. This is usually pretty simple since the name of the link to the web page is the same even if the addresses differ.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-to-use-the-library">
<h1>How to use the library</h1>
<p>We will show how to run an example script that uses the library. The script uses a couple of threads to download the data from a sample local web page into a temporary directory. There are two main ways to obtain the script and to execute it.</p>
<ol class="arabic simple">
<li>Using the source from the repository. Steps:<ol class="arabic">
<li>Download the source of the package from the repository (<tt class="docutils literal">git clone <span class="pre">https://github.com/mkobos/tree_crawler</span></tt>)</li>
<li>In the source's root directory, run the script <tt class="docutils literal">concurrent_tree_crawler/bin/run_sample_download_crawler.py</tt></li>
</ol>
</li>
<li>Using the installed library. Steps:<ol class="arabic">
<li>Install the <tt class="docutils literal">concurrent_tree_crawler</tt> library in your system from the PyPi packages repository (e.g. by executing <tt class="docutils literal">pip install <span class="pre">--user</span> concurrent_tree_crawler</tt> or <tt class="docutils literal">easy_install <span class="pre">--user</span> concurrent_tree_crawler</tt>)</li>
<li>Download the <a class="reference external" href="https://raw.github.com/mkobos/tree_crawler/master/concurrent_tree_crawler/bin/run_sample_download_crawler.py">concurrent_tree_crawler/bin/run_sample_download_crawler.py</a> and <a class="reference external" href="https://raw.github.com/mkobos/tree_crawler/master/concurrent_tree_crawler/bin/sample_download_crawler.py">concurrent_tree_crawler/bin/sample_download_crawler.py</a> scripts from the source repository, place them in a single directory and run the <tt class="docutils literal">run_sample_download_crawler.py</tt> script (make it first executable if needed).</li>
</ol>
</li>
</ol>
<p>For a more detailed information about creating one's own crawler using this library see <a class="reference external" href="http://github.com/mkobos/tree_crawler/wiki">http://github.com/mkobos/tree_crawler/wiki</a>.</p>
</div>
<div class="section" id="concurrent-tree-crawling-algorithm">
<h1>Concurrent tree crawling algorithm</h1>
<p>We use a set number of threads to concurrently explore a generic tree (we do not care at the moment whether it corresponds to a web site or not). The threads start their exploration of the nodes from the tree's root. Each thread tries to explore tree nodes which have not yet been explored by other threads (we use a modification of the breadth-search algorithm to minimize the number of situations when the threads get into each other's way).</p>
<p>In the case of web site crawling, it means that each thread has its own browser but tries not to open (and parse) web pages which have already been opened by other threads.</p>
<p>For a more detailed information about the generic algorithm see <a class="reference external" href="http://github.com/mkobos/tree_crawler/wiki">http://github.com/mkobos/tree_crawler/wiki</a>.</p>
</div>
<div class="section" id="project-files-and-directory-structure">
<h1>Project files and directory structure</h1>
<ul class="simple">
<li><tt class="docutils literal">Makefile</tt> -- The makefile used for managing different tasks related to the source code.</li>
<li><tt class="docutils literal">utils/run_tests.py</tt> script runs the unit tests (or alternatively: <tt class="docutils literal">make test</tt> or <tt class="docutils literal">./setup.py test</tt>) . Unit tests related to a certain source file are placed inside a <tt class="docutils literal">test</tt> directory which is placed in the same directory as the source file. This convention was introduced because we want the tests to be placed close to the source files but at the same time we want them not to pollute the source files directory.</li>
<li><tt class="docutils literal">utils/make_documentation.sh</tt> script generates API documentation from the source (or alternatively: <tt class="docutils literal">make <span class="pre">docs-api</span></tt>)</li>
<li><tt class="docutils literal">concurrent_tree_crawler/bin/run_sample_download_crawler.py</tt> script runs a sample crawler that downloads files from a local web site into a temporary directory</li>
</ul>
<p>The main directory contains also some configuration files for Eclipse and its PyDev plugin which are used to develop the project.</p>
</div>
</div>
</body>
</html>
